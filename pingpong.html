<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ping Pong JS</title>
  <style>
    canvas { background: #222; display: block; margin: 0 auto; }
    body { text-align: center; font-family: Arial, sans-serif; }
  </style>
</head>
<body>
  <h2>Juego Ping Pong</h2>
  <canvas id="pong" width="600" height="400"></canvas>
  <script>
    const canvas = document.getElementById('pong');
    const ctx = canvas.getContext('2d');

    // Pala
    const paddleWidth = 10, paddleHeight = 80;
    const player = { x: 10, y: canvas.height/2 - paddleHeight/2, speed: 5 };
    const ai = { x: canvas.width - paddleWidth - 10, y: canvas.height/2 - paddleHeight/2, speed: 4 };

    // Pelota
    const ball = {
      x: canvas.width/2, y: canvas.height/2,
      radius: 8,
      speed: 5,
      dx: 5 * (Math.random() > 0.5 ? 1 : -1),
      dy: 5 * (Math.random() > 0.5 ? 1 : -1)
    };

    // Puntuación
    let playerScore = 0, aiScore = 0;

    function drawRect(x, y, w, h, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, w, h);
    }

    function drawCircle(x, y, r, color) {
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI*2, false);
      ctx.closePath();
      ctx.fill();
    }

    function drawText(text, x, y, color) {
      ctx.fillStyle = color;
      ctx.font = "32px Arial";
      ctx.fillText(text, x, y);
    }

    function resetBall() {
      ball.x = canvas.width/2;
      ball.y = canvas.height/2;
      ball.dx = ball.speed * (Math.random() > 0.5 ? 1 : -1);
      ball.dy = ball.speed * (Math.random() > 0.5 ? 1 : -1);
    }

    function draw() {
      drawRect(0, 0, canvas.width, canvas.height, "#222");
      drawRect(player.x, player.y, paddleWidth, paddleHeight, "#fff");
      drawRect(ai.x, ai.y, paddleWidth, paddleHeight, "#fff");
      drawCircle(ball.x, ball.y, ball.radius, "#fff");
      drawText(playerScore, canvas.width/4, 50, "#fff");
      drawText(aiScore, 3*canvas.width/4, 50, "#fff");
    }

    function update() {
      // Mover pelota
      ball.x += ball.dx;
      ball.y += ball.dy;

      // Rebote arriba/abajo
      if (ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0) {
        ball.dy = -ball.dy;
      }

      // Rebote con palas
      let paddle = (ball.x < canvas.width/2) ? player : ai;
      if (
        ball.x - ball.radius < paddle.x + paddleWidth &&
        ball.x + ball.radius > paddle.x &&
        ball.y > paddle.y &&
        ball.y < paddle.y + paddleHeight
      ) {
        ball.dx = -ball.dx;
      }

      // Puntuación
      if (ball.x - ball.radius < 0) {
        aiScore++;
        resetBall();
      } else if (ball.x + ball.radius > canvas.width) {
        playerScore++;
        resetBall();
      }

      // IA simple
      if (ai.y + paddleHeight/2 < ball.y) ai.y += ai.speed;
      else if (ai.y + paddleHeight/2 > ball.y) ai.y -= ai.speed;
      ai.y = Math.max(0, Math.min(canvas.height - paddleHeight, ai.y));
    }

    // Control jugador
    document.addEventListener('keydown', function(e) {
      if (e.key === 'ArrowUp') player.y -= player.speed;
      if (e.key === 'ArrowDown') player.y += player.speed;
      player.y = Math.max(0, Math.min(canvas.height - paddleHeight, player.y));
    });

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>